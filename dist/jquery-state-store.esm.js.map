{"version":3,"file":"jquery-state-store.esm.js","sources":["../src/index.js"],"sourcesContent":["(function($) {\r\n  var stateStore = {};\r\n  var listeners = {};\r\n  var effects = {};\r\n\r\n  function createReactiveObject(stateName, initialState) {\r\n      return new Proxy(initialState, {\r\n          set(target, key, value) {\r\n              target[key] = value;\r\n              notifyListeners(stateName);\r\n              notifyEffects(stateName);\r\n              return true;\r\n          },\r\n          get(target, key) {\r\n              if (typeof target[key] === 'object' && target[key] !== null) {\r\n                  return createReactiveObject(stateName, target[key]);\r\n              }\r\n              return target[key];\r\n          }\r\n      });\r\n  }\r\n\r\n  function useState(name, initialValue) {\r\n      if (!stateStore.hasOwnProperty(name)) {\r\n          if (typeof initialValue === 'object' && initialValue !== null) {\r\n              stateStore[name] = createReactiveObject(name, initialValue);\r\n          } else {\r\n              stateStore[name] = initialValue;\r\n          }\r\n          listeners[name] = [];\r\n          effects[name] = [];\r\n          bindElements(name);\r\n      } else {\r\n          console.warn(`State \"${name}\" is already registered.`);\r\n      }\r\n  }\r\n\r\n  function getState(path) {\r\n      var keys = path.split('.');\r\n      var state = stateStore;\r\n      for (var i = 0; i < keys.length; i++) {\r\n          if (state[keys[i]] === undefined) {\r\n              return undefined;\r\n          }\r\n          state = state[keys[i]];\r\n      }\r\n      return state;\r\n  }\r\n\r\n  function setState(path, newValue) {\r\n      var keys = path.split('.');\r\n      var state = stateStore;\r\n      for (var i = 0; i < keys.length - 1; i++) {\r\n          if (state[keys[i]] === undefined) {\r\n              state[keys[i]] = {};\r\n          }\r\n          state = state[keys[i]];\r\n      }\r\n      var lastKey = keys[keys.length - 1];\r\n      state[lastKey] = newValue;\r\n      notifyListeners(keys[0]);\r\n      notifyEffects(keys[0]);\r\n  }\r\n\r\n  function reactive(path, listener) {\r\n      var keys = path.split('.');\r\n      var name = keys[0];\r\n      if (listeners.hasOwnProperty(name)) {\r\n          listeners[name].push(listener);\r\n      } else {\r\n          console.warn(`State \"${name}\" is not registered.`);\r\n      }\r\n  }\r\n\r\n  function notifyListeners(name) {\r\n      if (listeners.hasOwnProperty(name)) {\r\n          listeners[name].forEach(function(listener) {\r\n              listener(getState(name));\r\n          });\r\n      }\r\n  }\r\n\r\n  function useEffect(name, effect) {\r\n      var keys = name.split('.');\r\n      var topState = keys[0];\r\n      if (effects.hasOwnProperty(topState)) {\r\n          effects[topState].push({ path: name, effect: effect });\r\n          effect(getState(name));\r\n      } else {\r\n          console.warn(`State \"${name}\" is not registered.`);\r\n      }\r\n  }\r\n\r\n  function notifyEffects(name) {\r\n      if (effects.hasOwnProperty(name)) {\r\n          effects[name].forEach(function(effectObj) {\r\n              effectObj.effect(getState(effectObj.path));\r\n          });\r\n      }\r\n  }\r\n\r\n  function bindElements(stateName) {\r\n      $('[data-bind]').each(function() {\r\n          var element = $(this);\r\n          var bindings = element.data('bind').split(';');\r\n\r\n          bindings.forEach(function(binding) {\r\n              var parts = binding.split(':');\r\n              var directive = parts[0].trim();\r\n              var stateKey = parts[1].trim();\r\n\r\n              if (stateKey.startsWith(stateName)) {\r\n                  switch (directive) {\r\n                      case 'text':\r\n                          reactive(stateKey, function() {\r\n                              element.text(getState(stateKey));\r\n                          });\r\n                          break;\r\n                      case 'html':\r\n                          reactive(stateKey, function() {\r\n                              element.html(getState(stateKey));\r\n                          });\r\n                          break;\r\n                      case 'if':\r\n                          reactive(stateKey, function() {\r\n                              if (getState(stateKey)) {\r\n                                  element.show();\r\n                              } else {\r\n                                  element.hide();\r\n                              }\r\n                          });\r\n                          break;\r\n                      case 'data':\r\n                          reactive(stateKey, function() {\r\n                              element.data('value', getState(stateKey));\r\n                          });\r\n                          break;\r\n                      case 'model':\r\n                          reactive(stateKey, function() {\r\n                              element.val(getState(stateKey));\r\n                          });\r\n                          element.on('input', function() {\r\n                              setState(stateKey, element.val());\r\n                          });\r\n                          break;\r\n                      default:\r\n                          console.warn(`Unknown directive: ${directive}`);\r\n                  }\r\n              }\r\n          });\r\n      });\r\n  }\r\n\r\n  // Expose the functions to the global jQuery object\r\n  $.useState = useState;\r\n  $.getState = getState;\r\n  $.setState = setState;\r\n  $.reactive = reactive;\r\n  $.useEffect = useEffect;\r\n})(jQuery);\r\n\r\n$(document).ready(function() {\r\n  $('[data-bind]').each(function() {\r\n    var element = $(this);\r\n    var bindings = element.data('bind').split(';');\r\n\r\n    bindings.forEach(function(binding) {\r\n        var parts = binding.split(':');\r\n        var directive = parts[0].trim();\r\n        var stateKey = parts[1].trim();\r\n        var initialValue = $.getState(stateKey);\r\n\r\n        switch (directive) {\r\n            case 'text':\r\n                element.text(initialValue);\r\n                break;\r\n            case 'html':\r\n                element.html(initialValue);\r\n                break;\r\n            case 'if':\r\n                if (initialValue) {\r\n                    element.show();\r\n                } else {\r\n                    element.hide();\r\n                }\r\n                break;\r\n            case 'data':\r\n                element.data('value', initialValue);\r\n                break;\r\n            case 'model':\r\n                element.val(initialValue);\r\n                element.on('input', function() {\r\n                    $.setState(stateKey, element.val());\r\n                });\r\n                break;\r\n            default:\r\n                console.warn(`Unknown directive: ${directive}`);\r\n        }\r\n    });\r\n  });\r\n})"],"names":[],"mappings":"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"}