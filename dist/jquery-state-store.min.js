!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";!function(t){var e={},n={},a={};function i(t,e){return new Proxy(e,{set:(e,n,a)=>(e[n]=a,s(t),f(t),!0),get:(e,n)=>"object"==typeof e[n]&&null!==e[n]?i(t,e[n]):e[n]})}function o(t){for(var n=t.split("."),a=e,i=0;i<n.length;i++){if(void 0===a[n[i]])return;a=a[n[i]]}return a}function r(t,n){for(var a=t.split("."),i=e,o=0;o<a.length-1;o++)void 0===i[a[o]]&&(i[a[o]]={}),i=i[a[o]];i[a[a.length-1]]=n,s(a[0]),f(a[0])}function c(t,e){var a=t.split(".")[0];n.hasOwnProperty(a)?n[a].push(e):console.warn(`State "${a}" is not registered.`)}function s(t){n.hasOwnProperty(t)&&n[t].forEach((function(e){e(o(t))}))}function f(t){a.hasOwnProperty(t)&&a[t].forEach((function(t){t.effect(o(t.path))}))}t.useState=function(s,f){var u;e.hasOwnProperty(s)?console.warn(`State "${s}" is already registered.`):(e[s]="object"==typeof f&&null!==f?i(s,f):f,n[s]=[],a[s]=[],u=s,t("[data-bind]").each((function(){var e=t(this);e.data("bind").split(";").forEach((function(t){var n=t.split(":"),a=n[0].trim(),i=n[1].trim();if(i.startsWith(u))switch(a){case"text":c(i,(function(){e.text(o(i))}));break;case"html":c(i,(function(){e.html(o(i))}));break;case"if":c(i,(function(){o(i)?e.show():e.hide()}));break;case"data":c(i,(function(){e.data("value",o(i))}));break;case"model":c(i,(function(){e.val(o(i))})),e.on("input",(function(){r(i,e.val())}));break;default:console.warn(`Unknown directive: ${a}`)}}))})))},t.getState=o,t.setState=r,t.reactive=c,t.useEffect=function(t,e){var n=t.split(".")[0];a.hasOwnProperty(n)?(a[n].push({path:t,effect:e}),e(o(t))):console.warn(`State "${t}" is not registered.`)}}(jQuery),$(document).ready((function(){$("[data-bind]").each((function(){var t=$(this);t.data("bind").split(";").forEach((function(e){var n=e.split(":"),a=n[0].trim(),i=n[1].trim(),o=$.getState(i);switch(a){case"text":t.text(o);break;case"html":t.html(o);break;case"if":o?t.show():t.hide();break;case"data":t.data("value",o);break;case"model":t.val(o),t.on("input",(function(){$.setState(i,t.val())}));break;default:console.warn(`Unknown directive: ${a}`)}}))}))}))}));
//# sourceMappingURL=jquery-state-store.min.js.map
