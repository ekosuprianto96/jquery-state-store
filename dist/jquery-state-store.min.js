!function(){"use strict";!function(t){var e={},n={},a={};function i(t,e){return new Proxy(e,{set:(e,n,a)=>(e[n]=a,s(t),f(t),!0),get:(e,n)=>"object"==typeof e[n]&&null!==e[n]?i(t,e[n]):e[n]})}function r(t){for(var n=t.split("."),a=e,i=0;i<n.length;i++){if(void 0===a[n[i]])return;a=a[n[i]]}return a}function o(t,n){for(var a=t.split("."),i=e,r=0;r<a.length-1;r++)void 0===i[a[r]]&&(i[a[r]]={}),i=i[a[r]];i[a[a.length-1]]=n,s(a[0]),f(a[0])}function c(t,e){var a=t.split(".")[0];n.hasOwnProperty(a)?n[a].push(e):console.warn(`State "${a}" is not registered.`)}function s(t){n.hasOwnProperty(t)&&n[t].forEach((function(e){e(r(t))}))}function f(t){a.hasOwnProperty(t)&&a[t].forEach((function(t){t.effect(r(t.path))}))}t.useState=function(s,f){var u;e.hasOwnProperty(s)?console.warn(`State "${s}" is already registered.`):(e[s]="object"==typeof f&&null!==f?i(s,f):f,n[s]=[],a[s]=[],u=s,t("[data-bind]").each((function(){var e=t(this);e.data("bind").split(";").forEach((function(t){var n=t.split(":"),a=n[0].trim(),i=n[1].trim();if(i.startsWith(u))switch(a){case"text":c(i,(function(){e.text(r(i))}));break;case"html":c(i,(function(){e.html(r(i))}));break;case"if":c(i,(function(){r(i)?e.show():e.hide()}));break;case"data":c(i,(function(){e.data("value",r(i))}));break;case"model":c(i,(function(){e.val(r(i))})),e.on("input",(function(){o(i,e.val())}));break;default:console.warn(`Unknown directive: ${a}`)}}))})))},t.getState=r,t.setState=o,t.reactive=c,t.useEffect=function(t,e){var n=t.split(".")[0];a.hasOwnProperty(n)?(a[n].push({path:t,effect:e}),e(r(t))):console.warn(`State "${t}" is not registered.`)},t.applyBindings=function(){t("[data-bind]").each((function(){var e=t(this);e.data("bind").split(";").forEach((function(n){var a=n.split(":"),i=a[0].trim(),r=a[1].trim(),o=t.getState(r);switch(i){case"text":e.text(o);break;case"html":e.html(o);break;case"if":o?e.show():e.hide();break;case"data":e.data("value",o);break;case"model":e.val(o),e.on("input",(function(){t.setState(r,e.val())}));break;default:console.warn(`Unknown directive: ${i}`)}}))}))}}(jQuery),$(document).ready((function(){$.applyBindings()}))}();
